# Creating a watchonly wallet and psbt transaction
# https://github.com/bitcoin-core/HWI/blob/master/docs/bitcoin-core-usage.md
bitcoin-cli createwallet "coldcard" true

bcli -rpcwallet=coldcard importmulti '[{"range": [0, 1000], "timestamp": "now", "keypool": true, "watchonly": true, "desc": "wpkh([8c13f027/84h/1h/1h]tpubDDQ6z9XNJ111Zzqh7oBdEJygpsRTtqPKvx1vb41oCBWWPYNzgZt8MeEoHEWdUwJia8JJ8G2R9LjpS8GmUXCUTUZvX7iaGj3NLeRB6gJb9sN/0/*)#j7vrd57w", "internal": false}, {"range": [0, 1000], "timestamp": "now", "keypool": true, "watchonly": true, "desc": "wpkh([8c13f027/84h/1h/1h]tpubDDQ6z9XNJ111Zzqh7oBdEJygpsRTtqPKvx1vb41oCBWWPYNzgZt8MeEoHEWdUwJia8JJ8G2R9LjpS8GmUXCUTUZvX7iaGj3NLeRB6gJb9sN/1/*)#r2fzspwk", "internal": true}]'
# send
bcli -rpcwallet="" getnewaddress "return" bech32
# change
bcli -rpcwallet=coldcard getnewaddress "t" bech32

# amount includes fees although fee is included separately
bcli -rpcwallet=coldcard walletcreatefundedpsbt [] "{\"tb1qylf282cxxhnwrw0pf9mupqk9d6lcf2yjj495a6\":0.0002771}" 0 "{\"changeAddress\":\"tb1qwe29sm8n9gy8vt9nvv8smfgghtu7az4l3ffhln\", \"feeRate\":0.00001, \"subtractFeeFromOutputs\":[0], \"includeWatching\":true}"


# Creating a multisig address and transaction

bcli getnewaddress "msnode" bech32 
bcli getaddressinfo tb1q7qasj92qhezxuqee784l5yt7sgvc25rmq5ke8h | grep pubkey
039776a8ffa94e61fe3fbe92f9ef518e634af586368bc3dd4ba21356b6edf2d6af

bcli getnewaddress "mscold" bech32
bcli getaddressinfo tb1qcteg0fh4ncncy664uwdr4dhwugp7zngqt53ga3 | grep pubkey
03d369a2a08de8cd4085df200ce38ae3715e22c8f5cf97c5a2954625203bb29507

bcli getnewaddress "mstrez" bech32
bcli getaddressinfo tb1qksv5l9hdea03jmwlrx7vpxkw3rkpuaauedqvjf | grep pubkey
0299d6f509e319ca8e0735a8bce2c7196621aa9c9fb8e6a26211890b17d552fd76

bcli addmultisigaddress 2 "[\"03e5969cab746ae4ece7cf4b5435a2acc33dbec7c85524cd9f4eaf9040948cb511\",\"0324de7acdde36eb83bcfa1bc0c82b515b29f0b98a2e5029eca544d8e58182836c\",\"037b0f81fcb71ea8bad31fc65b25a79972b148a47c7d6c08dfa6cf5ba6846439e1\"]" "coldsats-test" bech32
{
  "address": "tb1qs49hqgnxzmvt76hvey796wplj37cympympkfrsrcgps3zwdt0ahs9vawvd",
  "redeemScript": "5221039776a8ffa94e61fe3fbe92f9ef518e634af586368bc3dd4ba21356b6edf2d6af2103d369a2a08de8cd4085df200ce38ae3715e22c8f5cf97c5a2954625203bb29507210299d6f509e319ca8e0735a8bce2c7196621aa9c9fb8e6a26211890b17d552fd7653ae"
}

bcli importaddress tb1qs49hqgnxzmvt76hvey796wplj37cympympkfrsrcgps3zwdt0ahs9vawvd "" false

#msnode
bcli walletcreatefundedpsbt [] "{\"tb1qn8khznuyg6vl8hv4scr8vhvaymzwznj8fx8ymq\":0.0003771}" 0 "{\"changeAddress\":\"tb1qtqzr37mxk4ms3kuv58nw3sneztehhlh2csl7gwx2n085pcswfgxqzf3cua\", \"feeRate\":0.0001, \"subtractFeeFromOutputs\":[0], \"includeWatching\":true}"
{
  "psbt": "cHNidP8BAH4CAAAAATHZGel/YdPEziu3MwsbkQU5cY4UXcufCKhjFIT8MmTWAAAAAAD+////Ak2dEQAAAAAAIgAghUtwImYW2L9q7Mk8XTg/lH2CbCTYbJHA
eEBhETmrf28IuwUAAAAAABepFEI0zXdXsa4kJYAx0UJ2GWfF7leghwAAAAAAAQEfWV4XAAAAAAAWABQjPLGiVI7W5tQG2zQ6pOpYbM0PLAABAWlSIQOXdqj/qU5h/j++kvn
vUY5jSvWGNovD3UuiE1a27fLWryED02mioI3ozUCF3yAM44rjcV4iyPXPl8WilUYlIDuylQchApnW9QnjGcqOBzWovOLHGWYhqpyfuOaiYhGJCxfVUv12U64AAA==",
  "fee": 0.00001540,
  "changepos": 0
}

#mscold
bcli walletprocesspsbt cHNidP8BAH4CAAAAATHZGel/YdPEziu3MwsbkQU5cY4UXcufCKhjFIT8MmTWAAAAAAD+////Ak2dEQAAAAAAIgAghUtwImYW2L9q7Mk8XTg/lH2CbCTYbJHAeEBhETmrf28IuwUAAAAAABepFEI0zXdXsa4kJYAx0UJ2GWfF7leghwAAAAAAAQEfWV4XAAAAAAAWABQjPLGiVI7W5tQG2zQ6pOpYbM0PLAABAWlSIQOXdqj/qU5h/j++kvnvUY5jSvWGNovD3UuiE1a27fLWryED02mioI3ozUCF3yAM44rjcV4iyPXPl8WilUYlIDuylQchApnW9QnjGcqOBzWovOLHGWYhqpyfuOaiYhGJCxfVUv12U64AAA==
{
  "psbt": "cHNidP8BAH4CAAAAATHZGel/YdPEziu3MwsbkQU5cY4UXcufCKhjFIT8MmTWAAAAAAD+////Ak2dEQAAAAAAIgAghUtwImYW2L9q7Mk8XTg/lH2CbCTYbJHAeEBhETmrf28IuwUAAAAAABepFEI0zXdXsa4kJYAx0UJ2GWfF7leghwAAAAAAAQEfWV4XAAAAAAAWABQjPLGiVI7W5tQG2zQ6pOpYbM0PLAEIawJHMEQCIFZiJboh3z59axU6UQEO7ByzYfKggsH/sAtyXBDpa0UHAiAhsGQ/v9xvxeLKKlHhmO4NfgRJOLAkuBhCmZsb8BefyQEhAhVS5VddGiFKLoBj/uERuJK1I/EA3qbIaLWpYYmqz1VGAAEBaVIhA5d2qP+pTmH+P76S+e9RjmNK9YY2i8PdS6ITVrbt8tavIQPTaaKgjejNQIXfIAzjiuNxXiLI9c+XxaKVRiUgO7KVByECmdb1CeMZyo4HNai84scZZiGqnJ+45qJiEYkLF9VS/XZTrgAA",
  "complete": true
}



#mstrez
bcli decodepsbt cHNidP8BAH4CAAAAATHZGel/YdPEziu3MwsbkQU5cY4UXcufCKhjFIT8MmTWAAAAAAD+////Ak2dEQAAAAAAIgAghUtwImYW2L9q7Mk8XTg/lH2CbCTYbJHAeEBhETmrf28IuwUAAAAAABepFEI0zXdXsa4kJYAx0UJ2GWfF7leghwAAAAAAAQEfWV4XAAAAAAAWABQjPLGiVI7W5tQG2zQ6pOpYbM0PLAEIawJHMEQCIFZiJboh3z59axU6UQEO7ByzYfKggsH/sAtyXBDpa0UHAiAhsGQ/v9xvxeLKKlHhmO4NfgRJOLAkuBhCmZsb8BefyQEhAhVS5VddGiFKLoBj/uERuJK1I/EA3qbIaLWpYYmqz1VGAAEBaVIhA5d2qP+pTmH+P76S+e9RjmNK9YY2i8PdS6ITVrbt8tavIQPTaaKgjejNQIXfIAzjiuNxXiLI9c+XxaKVRiUgO7KVByECmdb1CeMZyo4HNai84scZZiGqnJ+45qJiEYkLF9VS/XZTrgAA
bcli walletprocesspsbt cHNidP8BAH4CAAAAATHZGel/YdPEziu3MwsbkQU5cY4UXcufCKhjFIT8MmTWAAAAAAD+////Ak2dEQAAAAAAIgAghUtwImYW2L9q7Mk8XTg/lH2CbCTYbJHAeEBhETmrf28IuwUAAAAAABepFEI0zXdXsa4kJYAx0UJ2GWfF7leghwAAAAAAAQEfWV4XAAAAAAAWABQjPLGiVI7W5tQG2zQ6pOpYbM0PLAEIawJHMEQCIFZiJboh3z59axU6UQEO7ByzYfKggsH/sAtyXBDpa0UHAiAhsGQ/v9xvxeLKKlHhmO4NfgRJOLAkuBhCmZsb8BefyQEhAhVS5VddGiFKLoBj/uERuJK1I/EA3qbIaLWpYYmqz1VGAAEBaVIhA5d2qP+pTmH+P76S+e9RjmNK9YY2i8PdS6ITVrbt8tavIQPTaaKgjejNQIXfIAzjiuNxXiLI9c+XxaKVRiUgO7KVByECmdb1CeMZyo4HNai84scZZiGqnJ+45qJiEYkLF9VS/XZTrgAA

{
  "psbt": "cHNidP8BAH4CAAAAATHZGel/YdPEziu3MwsbkQU5cY4UXcufCKhjFIT8MmTWAAAAAAD+////Ak2dEQAAAAAAIgAghUtwImYW2L9q7Mk8XTg/lH2CbCTYbJHAeEBhETmrf28IuwUAAAAAABepFEI0zXdXsa4kJYAx0UJ2GWfF7leghwAAAAAAAQEfWV4XAAAAAAAWABQjPLGiVI7W5tQG2zQ6pOpYbM0PLAEIawJHMEQCIFZiJboh3z59axU6UQEO7ByzYfKggsH/sAtyXBDpa0UHAiAhsGQ/v9xvxeLKKlHhmO4NfgRJOLAkuBhCmZsb8BefyQEhAhVS5VddGiFKLoBj/uERuJK1I/EA3qbIaLWpYYmqz1VGAAEBaVIhA5d2qP+pTmH+P76S+e9RjmNK9YY2i8PdS6ITVrbt8tavIQPTaaKgjejNQIXfIAzjiuNxXiLI9c+XxaKVRiUgO7KVByECmdb1CeMZyo4HNai84scZZiGqnJ+45qJiEYkLF9VS/XZTrgAA",
  "complete": true
}
bcli finalizepsbt cHNidP8BAH4CAAAAATHZGel/YdPEziu3MwsbkQU5cY4UXcufCKhjFIT8MmTWAAAAAAD+////Ak2dEQAAAAAAIgAghUtwImYW2L9q7Mk8XTg/lH2CbCTYbJHAeEBhETmrf28IuwUAAAAAABepFEI0zXdXsa4kJYAx0UJ2GWfF7leghwAAAAAAAQEfWV4XAAAAAAAWABQjPLGiVI7W5tQG2zQ6pOpYbM0PLAEIawJHMEQCIFZiJboh3z59axU6UQEO7ByzYfKggsH/sAtyXBDpa0UHAiAhsGQ/v9xvxeLKKlHhmO4NfgRJOLAkuBhCmZsb8BefyQEhAhVS5VddGiFKLoBj/uERuJK1I/EA3qbIaLWpYYmqz1VGAAEBaVIhA5d2qP+pTmH+P76S+e9RjmNK9YY2i8PdS6ITVrbt8tavIQPTaaKgjejNQIXfIAzjiuNxXiLI9c+XxaKVRiUgO7KVByECmdb1CeMZyo4HNai84scZZiGqnJ+45qJiEYkLF9VS/XZTrgAA
{
  "hex": "0200000000010131d919e97f61d3c4ce2bb7330b1b910539718e145dcb9f08a8631484fc3264d60000000000feffffff024d9d110000000000220020854b70226616d8bf6aecc93c5d383f947d826c24d86c91c07840611139ab7f6f08bb05000000000017a9144234cd7757b1ae24258031d142761967c5ee57a087024730440220566225ba21df3e7d6b153a51010eec1cb361f2a082c1ffb00b725c10e96b4507022021b0643fbfdc6fc5e2ca2a51e198ee0d7e044938b024b81842999b1bf0179fc90121021552e5575d1a214a2e8063fee111b892b523f100dea6c868b5a96189aacf554600000000",
  "complete": true
}

bcli sendrawtransaction 0200000000010131d919e97f61d3c4ce2bb7330b1b910539718e145dcb9f08a8631484fc3264d60000000000feffffff024d9d110000000000220020854b70226616d8bf6aecc93c5d383f947d826c24d86c91c07840611139ab7f6f08bb05000000000017a9144234cd7757b1ae24258031d142761967c5ee57a087024730440220566225ba21df3e7d6b153a51010eec1cb361f2a082c1ffb00b725c10e96b4507022021b0643fbfdc6fc5e2ca2a51e198ee0d7e044938b024b81842999b1bf0179fc90121021552e5575d1a214a2e8063fee111b892b523f100dea6c868b5a96189aacf554600000000

txid: ddccaaaa275d051f6c1ecba29a7093aa61fe1c9a16aea3a7d3366ca0f2a0c737







importmulti 
'[{"range": [0, 1000], "timestamp": "now", "keypool": true, "watchonly": true, "desc": "wpkh([000000f1/84h/0h/0h]your_xpub_goes_here/0/)#7x87wdy3", "internal": false}, {"range": [0, 1000], "timestamp": "now", "keypool": true, "watchonly": true, "desc": "wpkh([000000f1/84h/0h/0h]your_xpub_goes_here/1/)#0jzlnc5f", "internal": true}]'

Then open Bitcoin Core and do these other steps...

In File>Create Wallet, create a wallet with "No Encryption" & "Watch Only" - call it anything you like (TrezorA for example).

Open Window>Console, select the wallet you just created (on the pull-down menu at the top) and then paste the importmulti command where you put your xpub.

Core will complain that the checksum is wrong (the "7x87wdy3" and "wdxy2s2t" parts in my example) replace them with the right ones shown in the message and retry.

You should see the wallet imported with success, but with no transaction history. 
It is necessary to rescan the chain to index the transactions that wallet made. 
To save time, you can use the blockheight of the first block where you made a transaction with that trezor, 
for example: "rescanblockchain 590500".