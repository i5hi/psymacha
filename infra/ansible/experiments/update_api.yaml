- hosts: swa
  gather_facts: false
  remote_user: sushi

  vars:
    ansible_python_interpreter: /usr/bin/python
    gituser: "vmenond"
    gitpass: "5ushiandghostboy"
    code_destination: "/home/sushi/api.sats.cc"
    infra_destination: "/home/sushi/infra.sats.cc"

  tasks:

    - name: Pull api.sats.cc
      git:
        repo: "https://{{gituser}}:{{gitpass}}@github.com/vmenond/api.sats.cc.git"
        dest: "{{ code_destination }}"
      
      
    - name: Compile typescript
      command: /usr/bin/tsc
      args:
        chdir: /home/sushi/api.sats.cc/typescript
